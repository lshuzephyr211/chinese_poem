<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>唐诗三百首 - 少儿古诗词学习</title>
    <link rel="stylesheet" href="src/css/main.css">
</head>
<body>
    <div class="app-container">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="navbar-content">
                <h1 class="app-title">📚 唐诗三百首</h1>
                <div class="nav-menu">
                    <button class="nav-item active" data-page="home">首页</button>
                    <button class="nav-item" data-page="poems">诗词库</button>
                    <button class="nav-item" data-page="progress">学习进度</button>
                    <button class="nav-item" data-page="achievements">🏆 成就</button>
                    <button class="nav-item" id="settings-btn">⚙️</button>
                </div>
            </div>
        </nav>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 首页 -->
            <section id="home-page" class="page active">
                <div class="welcome-card">
                    <h2 class="welcome-title">欢迎来到唐诗乐园</h2>
                    <p class="welcome-subtitle">品味经典，传承文化</p>
                </div>

                <div class="stats-container">
                    <div class="stat-card">
                        <span class="stat-icon">📖</span>
                        <span class="stat-value" id="total-poems">30</span>
                        <span class="stat-label">收录诗词</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">📝</span>
                        <span class="stat-value" id="learned-count">0</span>
                        <span class="stat-label">已学习</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">👑</span>
                        <span class="stat-value" id="mastered-count">0</span>
                        <span class="stat-label">已掌握</span>
                    </div>
                </div>

                <div class="today-section">
                    <h3 class="section-title">今日推荐</h3>
                    <div id="today-poems" class="poems-grid">
                        <!-- 今日推荐诗词卡片 -->
                    </div>
                </div>
            </section>

            <!-- 诗词库页面 -->
            <section id="poems-page" class="page">
                <div class="search-section">
                    <input type="text" id="search-input" class="search-input" placeholder="搜索诗词标题、作者或诗句...">
                </div>

                <div class="filter-section">
                    <div class="filter-group">
                        <span class="filter-label">难度：</span>
                        <select id="level-filter" class="filter-select">
                            <option value="">全部</option>
                            <option value="easy">启蒙级</option>
                            <option value="medium">成长级</option>
                            <option value="hard">进阶级</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <span class="filter-label">主题：</span>
                        <select id="theme-filter" class="filter-select">
                            <option value="">全部</option>
                            <option value="spring">春景</option>
                            <option value="moon">明月</option>
                            <option value="mountain">山水</option>
                            <option value="water">江河</option>
                            <option value="other">其他</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <span class="filter-label">诗人：</span>
                        <select id="author-filter" class="filter-select">
                            <option value="">全部</option>
                        </select>
                    </div>
                </div>

                <div class="results-count" id="results-count"></div>

                <div id="poems-grid" class="poems-grid">
                    <!-- 诗词卡片列表 -->
                </div>
            </section>

            <!-- 学习进度页面 -->
            <section id="progress-page" class="page">
                <h2 class="page-title">学习进度</h2>

                <div class="progress-overview">
                    <div class="progress-card">
                        <h3 class="progress-card-title">启蒙级</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-easy" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="progress-text-easy">0/0</span>
                    </div>
                    <div class="progress-card">
                        <h3 class="progress-card-title">成长级</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-medium" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="progress-text-medium">0/0</span>
                    </div>
                    <div class="progress-card">
                        <h3 class="progress-card-title">进阶级</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-hard" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="progress-text-hard">0/0</span>
                    </div>
                </div>

                <div class="learned-section">
                    <h3 class="section-title">已学诗词</h3>
                    <div id="learned-poems" class="poems-grid">
                        <!-- 已学诗词列表 -->
                    </div>
                </div>

                <div class="mastered-section">
                    <h3 class="section-title">已掌握诗词</h3>
                    <div id="mastered-poems" class="poems-grid">
                        <!-- 已掌握诗词列表 -->
                    </div>
                </div>
            </section>

            <!-- 成就页面 -->
            <section id="achievements-page" class="page">
                <h2 class="page-title">🏆 我的成就</h2>

                <div class="achievement-grid" id="achievement-list">
                    <!-- 成就卡片列表 -->
                </div>

                <div class="achievements-stats">
                    <div class="achievement-stat-card">
                        <span class="achievement-stat-icon">🏅</span>
                        <span class="achievement-stat-value" id="unlocked-achievements">0</span>
                        <span class="achievement-stat-label">已解锁成就</span>
                    </div>
                    <div class="achievement-stat-card">
                        <span class="achievement-stat-icon">📅</span>
                        <span class="achievement-stat-value" id="study-days">1</span>
                        <span class="achievement-stat-label">学习天数</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- 诗词详情弹窗 -->
        <div id="poem-detail-modal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close" id="modal-close">&times;</button>

                <div id="poem-detail-content">
                    <!-- 诗词详情内容 -->
                </div>
            </div>
        </div>

        <!-- 设置弹窗 -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close" id="settings-close">&times;</button>

                <h2 class="page-title">⚙️ 设置</h2>

                <div class="settings-section">
                    <h3 class="settings-title">GLM API 配置</h3>
                    <p class="settings-desc">设置智谱AI的API密钥以启用音频朗读功能</p>
                    <div class="settings-input-group">
                        <label for="api-key-input">API 密钥:</label>
                        <input type="password" id="api-key-input" class="settings-input" placeholder="请输入您的 GLM API 密钥">
                    </div>
                    <div class="settings-input-group">
                        <label for="voice-select">音色选择:</label>
                        <select id="voice-select" class="settings-input">
                            <option value="female">彤彤 (默认女声)</option>
                            <option value="male">男声</option>
                        </select>
                    </div>
                    <button class="action-button primary" id="save-api-key">保存设置</button>
                    <p class="settings-hint">获取密钥: https://open.bigmodel.cn/</p>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">音频缓存</h3>
                    <p class="settings-desc">已生成的音频会缓存在本地，避免重复调用API</p>
                    <div class="cache-info">
                        <span>已缓存: </span>
                        <span id="cache-count">0</span>
                        <span> 首诗词</span>
                    </div>
                    <button class="action-button secondary" id="clear-cache">清除所有音频缓存</button>
                    <p class="settings-hint">清除缓存后，下次播放时将重新生成音频</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 脚本文件 -->
    <script src="src/js/core/config.js"></script>
    <script src="src/js/data/storageService.js"></script>
    <script src="src/js/search/searchEngine.js"></script>
    <script src="src/js/audio/ttsService.js"></script>
    <script src="src/js/components/audioPlayer.js"></script>
    <script src="src/js/components/poemCard.js"></script>
    <script src="src/js/components/poemDetail.js"></script>
    <script src="src/js/data/poemService.js"></script>
    <script src="src/js/achievements/achievementService.js"></script>
    <script src="src/js/components/achievementCard.js"></script>
    <script src="src/js/core/app.js"></script>
</body>
</html>
